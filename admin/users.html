<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family:'Cairo',sans-serif; background:#f4f5f7; margin:0; padding:25px; margin-right:25px; padding: 25px; }

.table-box { background:white; border-radius:12px; box-shadow:0 2px 12px rgba(0,0,0,0.08); overflow:hidden; }
table { width:100%; border-collapse:collapse; }
th { background:#7a004b; color:white; padding:14px; font-size:15px; }
td { padding:12px; border-bottom:1px solid #eee; text-align:center; }

.view-btn {
  background:#0288d1; color:white;
  padding:7px 14px; border:none;
  border-radius:8px; cursor:pointer;
}
.view-btn:hover { opacity:0.85; }

.back {
  background:#7a004b; color:white;
  padding:8px 14px; border:none; border-radius:8px;
  margin-bottom:15px; cursor:pointer;
}
</style>
</head>

<body>

<h1 style="text-align:center;color:#7a004b;margin-bottom:20px;">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>

<button class="back" onclick="window.location='orders.html'">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø·Ù„Ø¨Ø§Øª</button>

<div class="table-box">
<table>
<thead>
<tr>
<th>ID</th>
<th>Ø§Ù„Ø§Ø³Ù…</th>
<th>Ø§Ù„Ø¬ÙˆØ§Ù„</th>
<th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th>
<th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
<th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
<th>Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</th>
</tr>
</thead>

<tbody id="usersBody"></tbody>
</table>
</div>

<script>
const API = "http://localhost:3000";

async function loadUsers() {
  const res = await fetch(API + "/api/admin/users");
  const users = await res.json();

  let html = "";
  users.forEach(u => {
    html += `
    <tr>
      <td>${u.id}</td>
      <td>${u.name}</td>
      <td>${u.phone}</td>
      <td>${u.email || "â€”"}</td>
      <td>${u.address || "â€”"}</td>
      <td>${u.created_at}</td>
      <td>
        <button class="view-btn" onclick="viewOrders('${u.phone}')">
          Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        </button>
      </td>
    </tr>
    `;
  });

  document.getElementById("usersBody").innerHTML = html;
}

function viewOrders(phone){
  window.location = `orders.html?phone=${phone}`;
}

loadUsers();
</script>

</body>
</html>
